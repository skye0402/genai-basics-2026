# Logging configuration
# Valid values: debug, info, warn, error
LOG_LEVEL=info

# Server configuration
PORT=3001

# SAP AI Core Service Key (required for web search via Perplexity)
# Get this from SAP BTP Cockpit -> AI Core Service Instance -> Service Keys
# Format: Single-line JSON string (remove line breaks)
# Example structure shown below - replace with your actual service key
AICORE_SERVICE_KEY='{"clientid":"sb-xxx","clientsecret":"xxx","url":"https://xxx.authentication.xxx.hana.ondemand.com","identityzone":"xxx","identityzoneid":"xxx","appname":"xxx","serviceurls":{"AI_API_URL":"https://api.ai.xxx"}}'

# SAP AI Core Resource Group (optional, defaults to 'default')
SAP_AI_RESOURCE_GROUP=default

# HANA Cloud Vector Store Configuration
HANA_DB_ADDRESS=your-hana-instance.hanacloud.ondemand.com
HANA_DB_PORT=443
HANA_DB_USER=your-username
HANA_DB_PASSWORD=your-password

# Vector Store Table Configuration
HANA_VECTOR_TABLE=LANGCHAIN_DEMO_DOCS
HANA_HEADER_TABLE=LANGCHAIN_DEMO_DOCS_HEADER

# Document Processing Configuration 
CHUNK_SIZE=2000
CHUNK_OVERLAP=200
SUMMARY_INPUT_MAX_PAGES=5
SUMMARY_INPUT_MAX_CHARS=10000

# Embedding Model Configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_BATCH_SIZE=10

# Metadata model configuration
METADATA_MODEL=gpt-4.1

# Vision model for image description (used for PDF image extraction)
VISION_MODEL=gpt-4.1

# Image extraction configuration
# Set to 'false' to disable image extraction from PDFs
ENABLE_IMAGE_EXTRACTION=true

# Test mode: limit number of pages to process for image extraction
# Set to a small number (e.g., 3) for testing to avoid token waste
# Set to 0 or leave unset to process all pages
MAX_IMAGE_PAGES=0

# Minimum image dimensions (pixels) - images smaller than this are skipped
# Small images are often icons, bullets, or low-quality compressed images
MIN_IMAGE_WIDTH=100
MIN_IMAGE_HEIGHT=100

# Parallel image analysis configuration
# Number of images to analyze concurrently per page (reduces total processing time)
IMAGE_ANALYSIS_CONCURRENCY=5
# Number of retries for rate-limited requests
IMAGE_ANALYSIS_RETRIES=3
# Base delay (ms) for exponential backoff on rate limits
IMAGE_ANALYSIS_RETRY_DELAY_MS=1000

# Image storage table
HANA_IMAGE_TABLE=LANGCHAIN_DEMO_IMAGES

# Multi-tenancy Configuration
DEFAULT_TENANT_ID=default-tenant
