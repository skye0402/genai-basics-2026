# Project Organization

This document describes the organization of the backend MCP server project.

## Folder Structure

```
backend-mcp/
├── src/                    # Source code
│   ├── tools/             # MCP tools
│   │   ├── webSearchTool.ts      # Perplexity web search
│   │   ├── documentTools.ts      # RAG document search
│   │   ├── stockTool.ts          # Yahoo Finance stock data
│   │   └── timeAndPlaceTool.ts   # Time/location context
│   ├── resources/         # MCP resources
│   │   └── greetingResource.ts
│   ├── api/               # REST API routes
│   │   └── documentRoutes.ts     # Document upload/delete
│   ├── utils/             # Utilities
│   │   ├── logger.ts
│   │   └── toolLogger.ts
│   └── server.ts          # Main server entry point
│
├── tests/                  # Test scripts and logs
│   ├── test-sap-integration.ts    # SAP AI SDK integration test
│   ├── list-deployments.ts        # List all deployments
│   ├── find-sonar.ts              # Find Perplexity deployments
│   ├── *.log                      # Test execution logs
│   └── README.md                  # Test documentation
│
├── docs/                   # Documentation
│   ├── README.md                           # Documentation index
│   ├── README-WEB-SEARCH.md                # User guide
│   ├── README-SAP-AI-SDK-INTEGRATION.md    # SAP integration guide
│   ├── IMPLEMENTATION-SUMMARY.md           # Implementation details
│   └── TEST-RESULTS.md                     # Test results
│
├── dist/                   # Build output (gitignored)
├── node_modules/           # Dependencies (gitignored)
│
├── .env.example           # Environment template
├── .env.local             # Local environment (gitignored)
├── .gitignore             # Git ignore rules
├── eslint.config.js       # ESLint configuration
├── package.json           # Package configuration
├── pnpm-lock.yaml         # Dependency lock file
├── tsconfig.json          # TypeScript configuration
└── README.md              # Main project README
```

## File Categories

### Source Code (`src/`)
All TypeScript source files that are compiled and deployed.

**Tools:**
- `webSearchTool.ts` - Perplexity web search via SAP AI Hub
- `documentTools.ts` - RAG document search with HANA Cloud Vector Engine
- `stockTool.ts` - Yahoo Finance stock data fetcher
- `timeAndPlaceTool.ts` - Time and location context provider

**Resources:**
- `greetingResource.ts` - Example MCP resource

**Utilities:**
- `logger.ts` - Logging utility with configurable levels
- `toolLogger.ts` - Tool registration wrapper with automatic logging

### Tests (`tests/`)
Test scripts, test utilities, and test execution logs.

**Scripts:**
- `test-sap-integration.ts` - Complete SAP AI SDK integration test
- `list-deployments.ts` - List all SAP AI Core deployments
- `find-sonar.ts` - Find Perplexity Sonar deployments

**Logs:**
- All `*.log` files from test executions
- Kept for debugging and verification

### Documentation (`docs/`)
All project documentation files.

**User Documentation:**
- `README-WEB-SEARCH.md` - How to use the web search tool
- `README-SAP-AI-SDK-INTEGRATION.md` - How to configure SAP integration

**Developer Documentation:**
- `IMPLEMENTATION-SUMMARY.md` - Implementation overview
- `TEST-RESULTS.md` - Detailed test results and findings

## NPM Scripts

All scripts are defined in `package.json`:

```bash
# Development
pnpm dev                    # Start server in watch mode

# Build
pnpm build                  # Compile TypeScript to JavaScript

# Production
pnpm start                  # Run compiled server

# Testing
pnpm test:sap              # Run SAP integration tests
pnpm list:deployments      # List SAP AI Core deployments

# Code Quality
pnpm lint                  # Run ESLint
```

## Environment Configuration

### `.env.example`
Template file showing all available environment variables.
Committed to git as documentation.

### `.env.local`
Actual environment configuration with secrets.
**Never committed to git** (in `.gitignore`).

Required variables:
- `AICORE_SERVICE_KEY` - SAP AI Core service credentials
- `SAP_AI_RESOURCE_GROUP` - Resource group name
- `LOG_LEVEL` - Logging level (debug, info, warn, error)
- `PORT` - Server port (default: 3001)

## Build Output

### `dist/`
Contains compiled JavaScript files from TypeScript source.
Generated by `pnpm build`.
Gitignored - not committed to repository.

### `*.tsbuildinfo`
TypeScript incremental build cache.
Gitignored.

## Dependencies

### `node_modules/`
NPM/pnpm package dependencies.
Gitignored - installed via `pnpm install`.

### `pnpm-lock.yaml`
Dependency lock file ensuring consistent installations.
Committed to git.

## Ignored Files

See `.gitignore` for complete list:
- `node_modules/` - Dependencies
- `dist/` - Build output
- `.env.local` - Local secrets
- `*.log` - Log files
- IDE and OS specific files

## Documentation Navigation

### For Users
1. Start with main `README.md`
2. Read `docs/README-WEB-SEARCH.md` for features
3. Follow `docs/README-SAP-AI-SDK-INTEGRATION.md` for setup

### For Developers
1. Review `docs/IMPLEMENTATION-SUMMARY.md` for architecture
2. Check `docs/TEST-RESULTS.md` for test status
3. See `tests/README.md` for testing guide

### For Testing
1. Configure `.env.local` from `.env.example`
2. Run `pnpm test:sap` to verify setup
3. Check `tests/*.log` for detailed output

## Maintenance

### Adding New Tools
1. Create tool file in `src/tools/`
2. Register in `src/server.ts`
3. Add documentation to `docs/`
4. Add tests to `tests/`

### Adding New Tests
1. Create test file in `tests/`
2. Add npm script to `package.json`
3. Document in `tests/README.md`

### Adding Documentation
1. Create markdown file in `docs/`
2. Link from `docs/README.md`
3. Reference in main `README.md` if user-facing

## Clean Project State

After organization, the root directory contains only:
- Configuration files (`.env.example`, `package.json`, `tsconfig.json`, etc.)
- Main `README.md`
- Organized folders (`src/`, `tests/`, `docs/`)

All test files, logs, and documentation are in their respective folders.
